from pydantic import BaseModel, Field
from typing import Optional


class PingRequest(BaseModel):
    target: str = Field(..., description="Domain or IP address to ping")
    timeout: int = Field(4, ge=1, le=30, description="Timeout in seconds")


class PortScanRequest(BaseModel):
    target: str = Field(..., description="Domain or IP address to scan")
    ports: str = Field("80,443,22,21,25", description="Comma-separated ports")


class DNSLookupRequest(BaseModel):
    domain: str = Field(..., description="Domain name to lookup")


class HTTPHeadersRequest(BaseModel):
    url: str = Field(..., description="URL to fetch headers from")


class TaskResponse(BaseModel):
    task_id: str = Field(..., description="Unique task identifier")
    status: str = Field(..., description="Task status: pending, progress, success, failure")
    message: str = Field(..., description="Human-readable message")


class TaskResultResponse(BaseModel):
    task_id: str
    status: str  # PENDING, PROGRESS, SUCCESS, FAILURE
    result: Optional[dict] = None
    error: Optional[str] = None
    meta: Optional[dict] = None


class HealthResponse(BaseModel):
    status: str
    redis_connected: bool
    celery_workers: int
